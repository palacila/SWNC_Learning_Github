---
title: "Github Basics"
author: "Sam Olivares-Mejia and Laura Palacios"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
```

# {.tabset .tabset-pills} 

## First Time Set Up 
This section is adapted from Kate Miller and Sarah Wright's IMD Training on [Version Control](https://katemmiller.github.io/IMD_R_Training_Advanced/) 

### 1. Install Git
  Git is the software needed for this learning session.If you do not already have Git installed on your computer, please install before the session.  
  
  a. Open the **Software Center** application on your computer (this will allow you to download without admin approval)
  b. Navigate to the **Applications** tab 
  c. Click on **Git** 
  d. Click Install 
    
![](images/InstallGit.png){width=500px}

If you're having issues installing Git, consult the [R Advisory Group Resources Sharepoint site](https://doimspp.sharepoint.com/sites/nps-nrss-imdiv/SitePages/R-Adv.aspx) and submit a helpdesk ticket if needed. 

### 2. Set Up a Github Account 

Go to [Join Github](https://github.com/join) to get started!

Username example: LpalaciosNPS or sam-olivares-mejia

You will need to verify your email to complete the joining process.

Once verified you will see the screen below. You don't need to personalize your account right away, click skip to reach your home screen.

![](images/GitHubSetup.png){width=500px}

Your new home page will look like this

![](images/GitHubHome.png){width=500px}
</br></br></br>

**To Do: Once you've completed this step ** </br>
**Please email your username to Sam (samantha_olivares-mejia@partner.nps.gov)** so she can add you to our training github page! 

Still having trouble? This [Wiki How](https://www.wikihow.com/Create-an-Account-on-GitHub) gives in depth instructions. 

### 3. Open R Studio and install the `usethis` package 
  Remember, to install packages we use the install.packages() function. You can type this in the Console.
  
![](images/InstallUseThis.png){width=300px}



### 4. Navigate to **Tools > Global Options** 
  a. On the list on the left, click on GIT SVN
  b. Make sure the 'Enable version interface for RStudio project box is checked 
  c. Your screen should look like this (git.exe path may differ)

![](images/GitSVN.png){width=300px}

  d. Click Apply then OK 
  
### 5. Create a Personal Access Token 
Your personal access token is used to connect your Github account to RStudio.

  a. run the code below in R Studio which will open a web browser to create a personal access token 
  
```{r MakeGHToken, eval=FALSE}
# This opens up a browser window where you can create a personal access token. It may ask you to log into GitHub or confirm your password.
usethis::create_github_token()
``` 
  
  b. once you've logged into GitHub your page will look like this 

![](images/GitHubPAT.png){width=500px}

  c. enter 'RStudio' in the ***Note** field 
  d. set the **expiration** to a later date (I'd reccommend a year)
  e. scroll to the bottom and click **generate token** 
  f. this code will only generate once so make sure you **copy the personal access token to your clipboard**!!! 

### 6. Insert your personal access token in the Git Credential Store 
  a. run the code below and when prompted paste your personal access token 

```{ SetGHCreds, eval=FALSE}
gitcreds::gitcreds_set()
```

## Github Overview 

### Git vs. GitHub
Git/Github is a type of **version control** which is a way to save your progress in an organized manner. It allows you to keep track of your changes every step of the way, and allows for easy collaboration between teams. 

Git and Github are used interchangeably, however they are two sperate entities. 

  **Git** is the software you install on your computer 
  **GitHub** is an online interface for storing and collaborating with code.  

### Some terminology

![](images/repository.png)

![](images/TermsToKnow.png)

```{r pushvpull, echo=FALSE, fig.align='center', out.width="50%"}
include_graphics("images/PushvPull.png")
```
![](images/timeline.png)

![](images/branch.png)

![](images/merge.png)

![](images/workflow.png)

## Branch and Clone Repository

### Branch 

First we are going to create a branch from main. To do this, go to the [SWNC Learning Github Repository](https://github.com/sam-olivares-mejia/SWNC_Learning_Github). 

If you've emailed Sam your GitHub username you should have contributor access to the repository. 

Click on the **main dropdown** in the upper left, and begin typing your name separated by underscores. Once complete, click on **'Create branch:*your name* from main'**. This will create your branch! 

```{r createbranch, echo=FALSE, fig.align='center', out.width="50%"}
include_graphics("images/CreateBranch.png")
```

### Clone the Repository

1. Click on **code** in the upper right, and copy the HTTPS url provided. 

```{r CloneRepo, echo=FALSE, fig.align='center', out.width="50%"}
include_graphics("images/CloneRepo.png")
```

2. Open R Studio and go to **File>NewProject>VersionControl>Git** 

```{r CloneRepoWorkflow, echo=FALSE, fig.align='center', out.width="50%"}
include_graphics("images/CloneRepoWorkflow.png")
```

3. Paste the repository URL and click **Create Project**. Congrats- you have now cloned the repository to your local computer! 

### Open Branch 

To switch to your branch of the repository, navigate to the Git Panel in RStudio. It should be located in the upper right panel next to your environment. If it is not there you can go to **View >ShowGit** to view it.

Click the drop down menu in the upper right and select your branch name to switch to your branch!  

```{r SwitchBranches, echo=FALSE, fig.align='center', out.width="50%"}
include_graphics("images/SwitchBranch.png")
```


## Stage and Commit



### Create a Markdown file 
We will create a new markdown file to add to the file structure by clicking file > New File > R Markdown.
![](images/CreateRMD.png){width=300px}
When prompted, enter FirstName_LastName as the title of your document. This will auto-poplate the green header block of your file.  All other options can be left as defaults. Click OK to create.

RMD files contain example code when they are created.We will keep the top block, but delete everything else (lines 11-30). 

Delete the code and replace with your own secret branch message.
![](images/PersonalizedRMD.png){width=400px}

Save the changes in the default location (Rstudio will put the file where it is supposed to go) and enter YourFirstName_LastName as the file name.
![](images/PersonalizedRMD2.png){width=400px}

Navigate to the GIT tab in the upper right. Notice that your RMD file is now listed, with an ? icon to indicate that it has been modified in some way. Note that other back-ed files may also be present and can be ignored for this training.
![](images/CommitChanges1.png){width=400px}
### Stage 

Click the check box next to your new file. Notice that it is highlighted and the ? icon changes to an "A" for addition. Click the commit button.
![](images/CommitChanges2.png){width=400px}
### Commit

A pop-up menu will show you a preview of what you are committing, allowing for you to make a final review.

Notice that the file previous is all green, to indicate additions. Other colors indicate other modifications.

Use the commit message box (requires entry) to describe the changes you have made. Note that anyone with access to the repository will eventually be able to see it.

Once your message is entered, press the commit button at the bottom of the message box.

![](images/CommitChanges3.png){width=400px}
A wild popup appears!

This popup shows the status of your commit. If you have not configured your username, you may receive a message that Rstudio has automatically attributed your information. This is okay, we'll use the defaults for now.

What we want to see is the last two lines indicating that a file has been changed and listing your RMD file.

![](images/CommitMessage.png){width=400px}

Return to your R studio. In the top left, you should see a note indicating that you have successfully committed a change and are now "ahead". This means that your version has changes that no one else can see. 
![](images/CommitReadytoPush.png){width=400px}

But we want **Everyone** to be able to see your hard work!
This is where pushing and pulling comes in.

## Push + Pull 

### Push
Pushing means that you take your local changes and throw them into a magical world where everyone can see what you've created (GitHub).

Use the green arrow to push your changes. Note that this arrow is in multiple locations in R studio. All accomplish the same thing.

![](images/PushMyButtons.png){width=400px}

Another popup should appear.

If you have had success, you will see a message like the one below.

Translation of the last line: 

you (HEAD) have pushed (->)to the branch (YourFirstName_LastName)
![](images/SuccessfulPush.png){width=400px}
Use your browser to navigate back to our GitHub Repo
[https://github.com/sam-olivares-mejia/SWNC_Learning_Github](https://github.com/sam-olivares-mejia/SWNC_Learning_Github)

Ensure that you're on your branch by clicking the branch dropdown menu and selecting your name.
![](images/WhatBranch.png){width=400px}

When you change branches, you should be automatically directed to the home screen of the branch. If you were successful, you will see your commit message has been logged and your file now exists online, accessible to others.

Gold Stars if you've made it this far!!
![](images/PushForSuccess.png){width=400px}
### Pull 

## Merge 

### Pull Request 

### Merge 

## (Re)Sources
  - [Link to Join Github](https://github.com/join)
  - [How to Create a GitHub Account](https://www.wikihow.com/Create-an-Account-on-GitHub)
  - [R Advisory Group Resources](https://doimspp.sharepoint.com/sites/nps-nrss-imdiv/SitePages/R-Adv.aspx) Monitors and manages the release of R, RStudio and Git in the NPS Software Center. The Advisory Group can help with installation and configuration issues.
  - [Happy Git and GitHub for the useR](https://happygitwithr.com/index.html)
  - [Version Control IMD Training](https://katemmiller.github.io/IMD_R_Training_Advanced/)
  - [GitHub Git Cheat Sheet](https://training.github.com/downloads/github-git-cheat-sheet/)

# {-}
